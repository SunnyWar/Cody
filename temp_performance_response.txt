```toml
# Cargo.toml

[workspace]
members = [
  "bitboard",
  "engine",
]
resolver = "3"

# Global release profile:
# - Use thin LTO by default for faster links while still enabling
#   cross-crate inlining and whole-program optimizations.
# - Keep a small number of codegen-units to balance optimization
#   quality and compilation time.
[profile.release]
opt-level = 3
lto = "thin"
codegen-units = 4
panic = "abort"
strip = true
debug = false

[profile.dev]
opt-level = 1              # Keep debug builds fast to compile
debug = true               # Keep debug symbols

[profile.bench]
inherits = "release"

# Per-crate overrides:
# These ensure that the hot path crates (engine, bitboard) are compiled
# with maximum optimization and aggressive cross-crate inlining, while
# allowing less performance-critical crates (if any are added later) to
# inherit the more moderate global settings above.

# The engine crate drives the search and should have the strongest
# optimizations. Using codegen-units=1 here improves inlining and
# interprocedural optimizations within the crate, which is critical
# for tight search loops.
[profile.release.package.engine]
opt-level = 3
codegen-units = 1
lto = "thin"

# The bitboard crate is heavily used in the engine’s inner loops.
# Matching the engine’s settings improves cross-crate inlining and
# constant propagation across the bitboard/engine boundary.
[profile.release.package.bitboard]
opt-level = 3
codegen-units = 1
lto = "thin"
```

```markdown
## Performance Impact

**Benchmark**: `engine` crate benchmarks (search routines)
**Before**: (configuration not explicitly set; assuming default `lto = "fat"`, `codegen-units = 1` on the whole workspace)
**After**: Workspace now uses `lto = "thin"` and `codegen-units = 4` globally, with `engine` and `bitboard` specifically pinned to `codegen-units = 1` and `lto = "thin"`.

Because I cannot run commands in your environment, I cannot provide concrete timing numbers. To measure the actual impact, run:

```bash
# Before editing Cargo.toml
cargo clean
cargo bench -p engine -- --baseline before

# After applying the changes above
cargo clean
cargo bench -p engine -- --baseline after
cargo bench -p engine -- --compare before
```

Recommended test/validation commands:

```bash
cargo build --release
cargo test
cargo bench -p engine
cargo run --release -p engine -- perft 5
```

Compare the benchmark output before and after the change. If the improvement is < 5%, consider:

- Dropping global `codegen-units` from `4` to `1` if build times are acceptable.
- Experimenting with `lto = "fat"` vs `lto = "thin"` specifically for the `engine` and `bitboard` packages by changing:

```toml
[profile.release.package.engine]
lto = "fat"

[profile.release.package.bitboard]
lto = "fat"
```

and re-running the same benchmark procedure.
```